<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module riak_core_coverage_fsm</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module riak_core_coverage_fsm</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>The coverage fsm is a behavior used to create       
a plan to cover a set of VNodes, distribute       
a specified command to each VNode in the plan       
and then compile the results.

<p><b>Behaviours:</b> <a href="gen_fsm.html"><tt>gen_fsm</tt></a>.</p>

<h2><a name="description">Description</a></h2><p>The coverage fsm is a behavior used to create       
a plan to cover a set of VNodes, distribute       
a specified command to each VNode in the plan       
and then compile the results.</p>
 
       <p>The number of VNodes required for full coverage       
is based on the number of partitions, the bucket       
n_val, and the number of primary VNodes from the       
preference list that are configured to be used by       
the module implementing this behavior.</p>
 
       <p>Modules implementing this behavior should return       
a 5 member tuple from their init function that looks       
like this:</p>
 
          <p><code>{Request, VNodeSelector, NVal, PrimaryVNodeCoverage,
           NodeCheckService, VNodeMaster, Timeout, State}</code></p>
 
       <p>The description of the tuple members is as follows:</p>
 
       <ul>
       <li>Request - An opaque data structure that is used by
         the VNode to implement the specific coverage request.</li>
       <li>VNodeSelector - Either the atom <code>all</code> to indicate that
         enough VNodes must be available to achieve a minimal
         covering set or <code>allup</code> to use whatever VNodes are
         available even if they do not represent a fully covering
         set.</li>
       <li>NVal - Indicates the replication factor and is used to
         accurately create a minimal covering set of VNodes.</li>
       <li>PrimaryVNodeCoverage - The number of primary VNodes
       from the preference list to use in creating the coverage
       plan.</li>
       <li>NodeCheckService - The service to use to check for available
       nodes (e.g. riak_kv).</li>
       <li>VNodeMaster - The atom to use to reach the vnode master module.</li>
       <li>Timeout - The timeout interval for the coverage request.</li>
       <li>State - The initial state for the module.</li>
       </ul>
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-from">from()</a></h3>
<p><tt>from() = {atom(), <a href="#type-req_id">req_id()</a>, pid()}</tt></p>


<h3 class="typedecl"><a name="type-req_id">req_id()</a></h3>
<p><tt>req_id() = non_neg_integer()</tt></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#behaviour_info-1">behaviour_info/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#start_link-3">start_link/3</a></td><td>Start a riak_core_coverage_fsm.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="behaviour_info-1">behaviour_info/1</a></h3>
<div class="spec">
<p><tt>behaviour_info(X1::atom()) -&gt; undefined | [{atom(), arity()}]</tt><br></p>
</div>

<h3 class="function"><a name="start_link-3">start_link/3</a></h3>
<div class="spec">
<p><tt>start_link(Mod::module(), From::<a href="#type-from">from()</a>, RequestArgs::[term()]) -&gt; {ok, pid()} | ignore | {error, term()}</tt><br></p>
</div><p>Start a riak_core_coverage_fsm.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Apr 25 2012, 15:41:39.</i></p>
</body>
</html>
